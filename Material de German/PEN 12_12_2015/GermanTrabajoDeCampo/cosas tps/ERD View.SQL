--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 8.0.856
--   Created On : Miércoles, 17 Junio, 2015 
--   DBMS       : SQL Server 2012 
--   -------------------------------------------------- 





--  Create Tables 
CREATE TABLE Auto ( 
	auto_id int NOT NULL,
	descripcion nvarchar(50)
)
;

CREATE TABLE Chofer ( 
	chofer_id int NOT NULL,
	nombre int,
	apellido nvarchar(50),
	direccion nvarchar(50),
	telefono int,
	dni int,
	nro_registro int,
	categoria int,
	suspencion_fk int
)
;

CREATE TABLE Chofer_Inspector ( 
	chofer_id int NOT NULL,
	inspector_id int NOT NULL
)
;

CREATE TABLE Cliente ( 
	nro_socio int NOT NULL,
	nombre nvarchar(50),
	apellido nvarchar(50),
	direccion nvarchar(50),
	telefono int,
	fecha_nacimiento int
)
;

CREATE TABLE Forma_Pago ( 
	forma_pago_id int NOT NULL,
	descripcion nvarchar(50)
)
;

CREATE TABLE Inspector ( 
	inspector_id int NOT NULL,
	nombre nvarchar(50)
)
;

CREATE TABLE Localidad ( 
	localidad_id int NOT NULL,
	descripcion nvarchar(50),
	provincia_fk int
)
;

CREATE TABLE Multa ( 
	multa_id int NOT NULL,
	descripcion nvarchar(50)
)
;

CREATE TABLE Pedido ( 
	pedido_id int NOT NULL,
	nro_socio_fk int,
	cantidad_pasajeros int,
	destino_fk int,
	forma_pago_fk int,
	tarifa_fk int,
	cambio char(1),
	chofer_fk int
)
;

CREATE TABLE Pedido_Cliente ( 
	pedido_id int NOT NULL,
	nro_socio bigint NOT NULL
)
;

CREATE TABLE Provincia ( 
	provincia_id int NOT NULL,
	descripcion nvarchar(50)
)
;

CREATE TABLE Retraso ( 
	tipo_id int NOT NULL,
	tipo nvarchar(50)
)
;

CREATE TABLE Suspencion ( 
	suspencion_id int NOT NULL,
	multa_fk int,
	fecha_desde date,
	fecha_hasta date
)
;

CREATE TABLE Tarifa ( 
	destino_id int NOT NULL,
	descripcion nvarchar(50),
	importe float
)
;


--  Create Primary Key Constraints 
ALTER TABLE Auto ADD CONSTRAINT PK_Auto 
	PRIMARY KEY CLUSTERED (auto_id)
;

ALTER TABLE Chofer ADD CONSTRAINT PK_Chofer 
	PRIMARY KEY CLUSTERED (chofer_id)
;

ALTER TABLE Chofer_Inspector ADD CONSTRAINT PK_Chofer_Inspector 
	PRIMARY KEY CLUSTERED (chofer_id, inspector_id)
;

ALTER TABLE Cliente ADD CONSTRAINT PK_Cliente 
	PRIMARY KEY CLUSTERED (nro_socio)
;

ALTER TABLE Forma_Pago ADD CONSTRAINT PK_Forma_Pago 
	PRIMARY KEY CLUSTERED (forma_pago_id)
;

ALTER TABLE Inspector ADD CONSTRAINT PK_Inspector 
	PRIMARY KEY CLUSTERED (inspector_id)
;

ALTER TABLE Localidad ADD CONSTRAINT PK_Localidad 
	PRIMARY KEY CLUSTERED (localidad_id)
;

ALTER TABLE Multa ADD CONSTRAINT PK_Multa 
	PRIMARY KEY CLUSTERED (multa_id)
;

ALTER TABLE Pedido ADD CONSTRAINT PK_Pedido 
	PRIMARY KEY CLUSTERED (pedido_id)
;

ALTER TABLE Pedido_Cliente ADD CONSTRAINT PK_Pedido_Cliente 
	PRIMARY KEY CLUSTERED (pedido_id, nro_socio)
;

ALTER TABLE Provincia ADD CONSTRAINT PK_Provincia 
	PRIMARY KEY CLUSTERED (provincia_id)
;

ALTER TABLE Retraso ADD CONSTRAINT PK_Retraso 
	PRIMARY KEY CLUSTERED (tipo_id)
;

ALTER TABLE Suspencion ADD CONSTRAINT PK_Suspencion 
	PRIMARY KEY CLUSTERED (suspencion_id)
;

ALTER TABLE Tarifa ADD CONSTRAINT PK_Tarifa 
	PRIMARY KEY CLUSTERED (destino_id)
;


--  Create Indexes 
ALTER TABLE Auto
	ADD CONSTRAINT UQ_Auto_auto_id UNIQUE (auto_id)
;

ALTER TABLE Chofer
	ADD CONSTRAINT UQ_Chofer_chofer_id UNIQUE (chofer_id)
;

ALTER TABLE Forma_Pago
	ADD CONSTRAINT UQ_Forma_Pago_forma_pago_id UNIQUE (forma_pago_id)
;

ALTER TABLE Inspector
	ADD CONSTRAINT UQ_Inspector_inspector_id UNIQUE (inspector_id)
;

ALTER TABLE Localidad
	ADD CONSTRAINT UQ_Localidad_localidad_id UNIQUE (localidad_id)
;

ALTER TABLE Multa
	ADD CONSTRAINT UQ_Multa_multa_id UNIQUE (multa_id)
;

ALTER TABLE Provincia
	ADD CONSTRAINT UQ_Provincia_provincia_id UNIQUE (provincia_id)
;

ALTER TABLE Retraso
	ADD CONSTRAINT UQ_Retraso_tipo_id UNIQUE (tipo_id)
;

ALTER TABLE Suspencion
	ADD CONSTRAINT UQ_Suspencion_suspencion_id UNIQUE (suspencion_id)
;

ALTER TABLE Tarifa
	ADD CONSTRAINT UQ_Tarifa_destino_id UNIQUE (destino_id)
;
