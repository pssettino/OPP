--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 8.0.856
--   Created On : Lunes, 15 Junio, 2015 
--   DBMS       : MySql 
--   -------------------------------------------------- 


SET FOREIGN_KEY_CHECKS=0;




--  Create Tables 
CREATE TABLE Bitacora
(
	bitacora_id INTEGER NOT NULL,
	fecha TIMESTAMP,
	descripcion NVARCHAR(50),
	usuario_fk INTEGER,
	dvh INTEGER,
	PRIMARY KEY (bitacora_id)
) 
;


CREATE TABLE Cliente
(
	cliente_id INTEGER NOT NULL,
	usuario_fk INTEGER NOT NULL,
	direccion NVARCHAR(50) NOT NULL,
	nombre NVARCHAR(50),
	apellido NVARCHAR(50),
	telefono INTEGER,
	fecha_alta TIMESTAMP,
	activo BOOL,
	dni INTEGER,
	email NVARCHAR(50),
	dvh INTEGER,
	localidad_fk INTEGER,
	provincia_fk INTEGER,
	PRIMARY KEY (cliente_id)
) 
;


CREATE TABLE Criticidad
(
	criticidad_id INTEGER NOT NULL,
	bitacora_fk INTEGER NOT NULL,
	descripcion NVARCHAR(50),
	dvh INTEGER,
	PRIMARY KEY (criticidad_id)
) 
;


CREATE TABLE DVV
(
	tabla_id INTEGER NOT NULL,
	dvv INTEGER,
	PRIMARY KEY (tabla_id)
) 
;


CREATE TABLE Familia
(
	familia_id INTEGER NOT NULL,
	nombre NVARCHAR(50),
	descripcion NVARCHAR(50),
	patente_fk INTEGER,
	dvh INTEGER,
	PRIMARY KEY (familia_id)
) 
;


CREATE TABLE Familia_Usuario
(
	familia_id INTEGER NOT NULL,
	usuario_id INTEGER NOT NULL,
	PRIMARY KEY (familia_id, usuario_id)
) 
;


CREATE TABLE Idioma
(
	idioma_id INTEGER NOT NULL,
	idioma NVARCHAR(50),
	PRIMARY KEY (idioma_id)
) 
;


CREATE TABLE Laboratorio
(
	laboratorio_id INTEGER NOT NULL,
	razon_social NVARCHAR(50),
	cuit INTEGER,
	telefono INTEGER,
	PRIMARY KEY (laboratorio_id)
) 
;


CREATE TABLE Localidad
(
	localidad_id INTEGER NOT NULL,
	descripcion NVARCHAR(50),
	provincia_fk INTEGER NOT NULL,
	PRIMARY KEY (localidad_id)
) 
;


CREATE TABLE Medicamento
(
	medicamento_id INTEGER NOT NULL,
	usuario_fk INTEGER NOT NULL,
	laboratorio_fk INTEGER,
	cantidad INTEGER,
	precio DOUBLE,
	activo BOOL,
	PRIMARY KEY (medicamento_id)
) 
;


CREATE TABLE Patente
(
	patente_id INTEGER NOT NULL,
	nombre NVARCHAR(50),
	descripcion NVARCHAR(50),
	dvh INTEGER,
	PRIMARY KEY (patente_id)
) 
;


CREATE TABLE Patente_Familia
(
	familia_id INTEGER NOT NULL,
	patente_id INTEGER NOT NULL,
	PRIMARY KEY (familia_id, patente_id)
) 
;


CREATE TABLE Provincia
(
	provincia_id INTEGER NOT NULL,
	descripcion NVARCHAR(50),
	PRIMARY KEY (provincia_id)
) 
;


CREATE TABLE Usuario
(
	usuario_id INTEGER NOT NULL,
	nombre NVARCHAR(50),
	apellido NVARCHAR(50),
	nombre_usuario NVARCHAR(50),
	contraseña NVARCHAR(50),
	dni INTEGER,
	activo BOOL,
	dvh INTEGER,
	cci INTEGER,
	idioma_fk INTEGER NOT NULL,
	patente_fk INTEGER NOT NULL,
	familia_fk INTEGER NOT NULL,
	email INTEGER,
	PRIMARY KEY (usuario_id)
) 
;


CREATE TABLE Usuario_Patente
(
	patente_id INTEGER NOT NULL,
	usuario_id INTEGER NOT NULL,
	negado CHAR(1),
	PRIMARY KEY (patente_id, usuario_id)
) 
;


CREATE TABLE Venta
(
	venta_id INTEGER NOT NULL,
	cliente_fk INTEGER NOT NULL,
	usuario_id INTEGER NOT NULL,
	medicamento_fk INTEGER,
	dvh INTEGER,
	fecha_venta TIMESTAMP,
	receta BIT,
	activo BOOL,
	PRIMARY KEY (venta_id)
) 
;


CREATE TABLE Venta_Medicamento
(
	venta_id INTEGER NOT NULL,
	medicamento_id INTEGER NOT NULL,
	cantidad_venta INTEGER,
	precio_venta DOUBLE,
	dvh INTEGER,
	PRIMARY KEY (venta_id, medicamento_id)
) 
;



SET FOREIGN_KEY_CHECKS=1;
